jQuery(document).ready(function(a){function b(){var a,b;for(n={},a=0,b=poi.length;b>a;a++)n[poi[a].id]=poi[a];for(o={},a=0,b=cat.length;b>a;a++)o[cat[a].id]=cat[a]}function c(){function b(){var b;b=a(".gjmaps-category"),percent=a(window).innerWidth()>768?b.length>2?(100-2*b.length)/b.length+"%":"50%":"100%",b.css("width",percent)}var c,e="";for(c=0;c<cat.length;c++)"1"!=cat[c].hide_list&&(e+=d(cat[c]));a(".gjmaps-categories").append(e),a(".gjmaps-category div[data-type='label']").click(function(){var b;catElement=a(this).closest(".gjmaps-category"),b=catElement.attr("data-cat-id"),"all"===b?(j=[],a("[data-cat-id='all']").addClass("active"),catElement.siblings(".gjmaps-category").removeClass("active"),1===poi_list&&a(".gjmaps-category ul").slideDown()):(a("[data-cat-id='all']").removeClass("active"),catElement.siblings(".gjmaps-category").removeClass("active"),a(".gjmaps-category[data-cat-id="+b+"]").addClass("active"),1===poi_list&&(catElement.siblings(".gjmaps-category").find("ul").slideUp(),a("ul",catElement).slideDown(),a(".gjmaps-category[data-cat-id="+b+"]").slideDown()),j=[b]),q.close(),f(),""===b&&(h.panTo(k.center),h.setZoom(k.zoom))}),b()}function d(a){var b,c,d,e,f,g;if(g="",f="","background"===label_color?(a.icon?(e=a.icon.replace(/\/marker-/,"/symbol-"),g="background-image: url("+e+");"):g="",f="background-color: "+a.color+";"):"text"===label_color&&(g="",f="color: "+a.color+";"),b='<li class="gjmaps-category" data-cat-id="'+a.id+'"><div style="'+g+f+'" class="gjmaps-label" data-type="label"><span>'+a.name+"</span></div><ul>",1===poi_list)for(c=0,d=poi.length;d>c;c++)poi[c].cat_id==a.id&&(b+='<li class="poi" data-poi-id="'+poi[c].id+'">',poi_number&&(b+="<span>"+poi[c].num+" </span>"),b+=poi[c].name+"</li>");return b+="</ul></li>"}function e(b){console.log(b);var c,d,e,f;c='<div class="poi-info" style="overflow:hidden;"><h4>'+b.name+"</h4>",b.description&&(c+='<div class="description">'+b.description+"</div>"),c+='<div class="address">'+b.address+"<br>"+b.city+", "+b.state+" "+b.zip+'</div><div class="contact">',b.phone&&(c+=b.phone,b.url&&(c+="<br>")),b.url&&(d=b.url.replace(/^https?:\/\/|\/$/g,""),c+='<a href="'+b.url+'" target="_blank">'+d+"</a>"),c+="</div></div>",q.setContent(c),q.open(h,b.marker),e=a("header"),f=a("#map-canvas").offset().top-e.height()-e.position().top,a(document.body).scrollTop()>f&&a(document.body).animate({scrollTop:f},300)}function f(a){var b,c,d,f,g;for(m=new google.maps.LatLngBounds,b=0,c=poi.length;c>b;b++)if(d=!j||"object"==typeof j&&(!j.length||-1!==j.indexOf(poi[b].cat_id)||"1"==o[poi[b].cat_id].filter_resist)||("string"==typeof j||"number"==typeof j)&&poi[b].id==j,"undefined"!=typeof poi[b].marker)d?(poi[b].marker.setMap(h),m.extend(poi[b].marker.getPosition())):poi[b].marker.setMap(null);else if(d&&Number(poi[b].lat)&&Number(poi[b].lng)){var i=o[poi[b].cat_id];f=new google.maps.LatLng(poi[b].lat,poi[b].lng),poi_number?poi[b].marker=new MarkerWithLabel({position:f,draggable:!1,map:h,icon:poi_icon_url,labelContent:poi[b].num,labelAnchor:new google.maps.Point(12,0),labelClass:"gj-maps-marker-label",labelStyle:{width:"25px",height:"25px",paddingTop:"4px",color:"white",background:i.color,"border-radius":"50%"}}):(g={position:f,map:h,title:poi[b].name},i&&(g.icon={url:i.icon,anchor:p}),poi[b].marker=new google.maps.Marker(g)),google.maps.event.addListener(poi[b].marker,"click",function(a){return function(){e(poi[a])}}(b)),m.extend(f)}l=h.getBounds(),(a||l&&!l.intersects(m))&&"((1, 180), (-1, -180))"!=m.toString()&&h.fitBounds(m)}function g(){"0"===map_styles&&(map_styles=""),k={zoom:map_zoom,center:new google.maps.LatLng(0,0),mapTypeId:google.maps.MapTypeId.ROADMAP,styles:map_styles},center_lat&&center_lng&&(k.center=new google.maps.LatLng(center_lat,center_lng)),h=new google.maps.Map(document.getElementById("map-canvas"),k),google.maps.event.addDomListener(window,"resize",function(){var a=h.getCenter();google.maps.event.trigger(h,"resize"),h.setCenter(a)}),j=[],q=new google.maps.InfoWindow,f(!center_lat||!center_lng),c()}var h,j,k,l,m,n,o,p,q;p=new google.maps.Point(5,33),b(),google.maps.event.addDomListener(window,"load",g),a("div.gjmaps-wrapper").on("click","li.poi",function(){var b,c;for(b=a(this).data("poi-id"),c=!1,i=0;poi.length>i;i++)if(poi[i].id==b){c=poi[i];break}0!=c&&e(c)})});